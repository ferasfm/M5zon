@echo off
chcp 65001 >nul
title ูุธุงู ุฅุฏุงุฑุฉ ุงููุฎุฒูู ุงูุงุญุชุฑุงูู

echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo ๐ ูุธุงู ุฅุฏุงุฑุฉ ุงููุฎุฒูู ุงูุงุญุชุฑุงูู
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

REM ูุญุต ุฅุฐุง ูุงู Node.js ูุซุจุช
node --version >nul 2>&1
if errorlevel 1 (
    echo โ Node.js ุบูุฑ ูุซุจุช!
    echo ๐ก ูุฑุฌู ุชุซุจูุช Node.js ูู: https://nodejs.org
    pause
    exit /b 1
)

REM ูุญุต ุฅุฐุง ูุงู ุงููููุฐ 3000 ูุณุชุฎุฏู
echo ๐ ูุญุต ุงููููุฐ 3000...
netstat -ano | findstr :3000 >nul 2>&1
if not errorlevel 1 (
    echo.
    echo โ ุงููููุฐ 3000 ูุณุชุฎุฏู ุจุงููุนู!
    echo ๐ก ุงูุจุฑูุงูุฌ ูุนูู ุจุงููุนู ุนูู: http://localhost:3000
    echo.
    echo ุฎูุงุฑุงุช ูุชุงุญุฉ:
    echo   1. ุงุถุบุท ุฃู ููุชุงุญ ูููุชุงุจุนุฉ ูุงูุชุดุบูู ุงููุณุฑู
    echo   2. ุฃุบูู ูุฐู ุงููุงูุฐุฉ ูุงุณุชุฎุฏู stop.bat ูุฅููุงู ุงูุจุฑูุงูุฌ ุงูุญุงูู
    echo   3. ุงูุชุญ http://localhost:3000 ูู ุงููุชุตูุญ
    echo.
    pause
    echo.
    echo ๐ ุชุดุบูู ูุณุฑู...
    goto :start_server
)

echo โ ุงููููุฐ 3000 ูุชุงุญ

:start_server
echo.
echo ๐ฆ ูุญุต ุงูุชุจุนูุงุช...
if not exist node_modules (
    echo ๐ฅ ุชุซุจูุช ุงูุชุจุนูุงุช...
    npm install
    if errorlevel 1 (
        echo โ ูุดู ูู ุชุซุจูุช ุงูุชุจุนูุงุช
        pause
        exit /b 1
    )
)

echo.
echo ๐ ุจุฏุก ุฎุงุฏู ุงูุชุทููุฑ...
echo ๐ ุณูุชู ูุชุญ ุงูุจุฑูุงูุฌ ุนูู: http://localhost:3000
echo ๐ ูุฅููุงู ุงูุจุฑูุงูุฌ: ุงุถุบุท Ctrl+C ุฃู ุฃุบูู ูุฐู ุงููุงูุฐุฉ
echo.
echo โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
echo.

REM ุจุฏุก ุงูุฎุงุฏู
npm run dev:force

REM ุฅุฐุง ุงูุชูู ุงูุจุฑูุงูุฌ
echo.
echo ๐ ุชู ุฅููุงู ุงูุฎุงุฏู
pause
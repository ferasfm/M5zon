# ุชูุฑูุฑ ูุญุต ุดุงูู ููุธุงู ุฅุฏุงุฑุฉ ุงูุฃุณุจุงุจ

## ๐ ููุฎุต ุงูุชุฏููู

ุชู ูุญุต **ูุงูู ุงูุจุฑูุงูุฌ** ููุชุฃูุฏ ูู ุฃู ูุธุงู ุฅุฏุงุฑุฉ ุงูุฃุณุจุงุจ ูุนูู ุจุดูู ูุชูุงูู ูู ุฌููุน ุงูุตูุญุงุช.

---

## โ 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช (Supabase)

### ุงูุฌุฏูู: `transaction_reasons`

```sql
CREATE TABLE transaction_reasons (
  id uuid PRIMARY KEY,
  reason_text text NOT NULL,
  reason_type text CHECK (reason_type IN ('purchase','dispatch','scrap','both')),
  is_active boolean DEFAULT true,
  display_order integer DEFAULT 0,
  created_at timestamptz,
  updated_at timestamptz
)
```

### ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ:
| ุงูุณุจุจ | ุงูููุน | ุงูุชุฑุชูุจ |
|------|------|---------|
| ุงุญุชูุงุฌ ุฌุฏูุฏ | both | 1 |
| ุจุฏู ุชุงูู | both | 2 |
| ุชุฌุฏูุฏ ูุฎุฒูู | both | 3 |
| ููุณูุฑ | both | 4 |
| ุชูู ุจุณุจุจ ุณูุก ุงุณุชุฎุฏุงู | scrap | 5 |
| ุนุทู ุบูุฑ ูุงุจู ููุฅุตูุงุญ | scrap | 6 |
| ุงูุชูุงุก ุงูุนูุฑ ุงูุงูุชุฑุงุถู | scrap | 7 |
| ุฃุณุจุงุจ ุฃุฎุฑู | scrap | 8 |

### ุงูููุงุฑุณ:
- โ `idx_transaction_reasons_type` ุนูู `reason_type`
- โ `idx_transaction_reasons_active` ุนูู `is_active`

---

## โ 2. Types (ุฃููุงุน ุงูุจูุงูุงุช)

### `TransactionReason` Interface:
```typescript
{
  id: string;
  reasonText: string;
  reasonType: 'purchase' | 'dispatch' | 'scrap' | 'both';
  isActive: boolean;
  displayOrder: number;
}
```

### API ูู `UseInventoryReturn`:
```typescript
reasonsApi: {
  addReason: (text, type) => Promise<void>;
  updateReason: (reason) => Promise<void>;
  deleteReason: (id) => Promise<void>;
  getPurchaseReasons: () => TransactionReason[];
  getDispatchReasons: () => TransactionReason[];
  getScrapReasons: () => TransactionReason[];
}
```

---

## โ 3. ุงูุตูุญุงุช ุงููุญุฏุซุฉ

### 3.1 ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช (Settings.tsx)
- โ ุชู ุฅุถุงูุฉ ูููู `ReasonsManager`
- โ ูุนุฑุถ 3 ุฃูุณุงู: ุฃุณุจุงุจ ุงูุดุฑุงุกุ ุฃุณุจุงุจ ุงูุตุฑูุ ุฃุณุจุงุจ ุงูุฅุชูุงู
- โ ูููู ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู/ุชูุนูู/ุชุนุทูู ุงูุฃุณุจุงุจ

### 3.2 ุตูุญุฉ ุงุณุชูุงู ุงูุจุถุงุนุฉ (Receiving.tsx)
- โ ุชู ุฅุฒุงูุฉ `PURCHASE_REASONS` ุงูุซุงุจุชุฉ
- โ ูุณุชุฎุฏู `reasonsApi.getPurchaseReasons()`
- โ ูุนุฑุถ ููุท ุงูุฃุณุจุงุจ ุงููุดุทุฉ ูู ููุน `purchase` ุฃู `both`
- โ ุงูุชุญุฏูุซ ููุฑู ุนูุฏ ุชุบููุฑ ุงูุฃุณุจุงุจ ูู ุงูุฅุนุฏุงุฏุงุช

### 3.3 ุตูุญุฉ ุตุฑู ุงูุจุถุงุนุฉ (Dispatching.tsx)
- โ ุชู ุฅุฒุงูุฉ `DISPATCH_REASONS` ุงูุซุงุจุชุฉ
- โ ูุณุชุฎุฏู `reasonsApi.getDispatchReasons()`
- โ ูุนุฑุถ ููุท ุงูุฃุณุจุงุจ ุงููุดุทุฉ ูู ููุน `dispatch` ุฃู `both`
- โ ุงูุชุญุฏูุซ ููุฑู ุนูุฏ ุชุบููุฑ ุงูุฃุณุจุงุจ ูู ุงูุฅุนุฏุงุฏุงุช

### 3.4 ุตูุญุฉ ุฅุชูุงู ุงูุจุถุงุนุฉ (Scrapping.tsx)
- โ ุชู ุฅุฒุงูุฉ `SCRAP_REASONS` ุงูุซุงุจุชุฉ
- โ ูุณุชุฎุฏู `reasonsApi.getScrapReasons()`
- โ ูุนุฑุถ ููุท ุงูุฃุณุจุงุจ ุงููุดุทุฉ ูู ููุน `scrap`
- โ ุงูุชุญุฏูุซ ููุฑู ุนูุฏ ุชุบููุฑ ุงูุฃุณุจุงุจ ูู ุงูุฅุนุฏุงุฏุงุช

### 3.5 ุตูุญุฉ ุงูุชูุงุฑูุฑ (Reports.tsx)
- โ ุชุนุฑุถ `purchaseReason` ูู ุชูุฑูุฑ ุงูุงุณุชูุงู
- โ ุชุนุฑุถ `dispatchReason` ูู ุชูุฑูุฑ ุงูุตุฑู (ุฅู ูุฌุฏ)
- โ ุชุนุฑุถ ุงูุฃุณุจุงุจ ุงูุชุงุฑูุฎูุฉ ุงููุญููุธุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ๏ธ **ููุงุญุธุฉ**: ุงูุชูุงุฑูุฑ ุชุนุฑุถ ุงูุฃุณุจุงุจ ุงููุญููุธุฉ ุชุงุฑูุฎููุงุ ุญุชู ูู ุชู ุญุฐู ุงูุณุจุจ ูู ุงูุฅุนุฏุงุฏุงุช

### 3.6 ุตูุญุฉ ุงูุทุจุงุนุฉ (PrintTemplates.tsx)
- โ ุชุนุฑุถ `purchaseReason` ูู ุงููุทุงูุจุฉ ุงููุงููุฉ
- โ ุชุนุฑุถ ุงูุณุจุจ ูู ุนููุฏ "ุณุจุจ ุงูุดุฑุงุก"
- โ ุชุนุฑุถ ุงูุฃุณุจุงุจ ุงูุชุงุฑูุฎูุฉ ุงููุญููุธุฉ

### 3.7 ุตูุญุฉ ููู ุงูููุฑุฏ (SupplierProfile.tsx)
- โ ุชุนุฑุถ `purchaseDate` ูููุดุชุฑูุงุช ูู ุงูููุฑุฏ
- โ ุชุนุฑุถ ุชูุงุตูู ุงููุดุชุฑูุงุช ุงูุชุงุฑูุฎูุฉ

---

## โ 4. ูููู ุฅุฏุงุฑุฉ ุงูุฃุณุจุงุจ (ReasonsManager.tsx)

### ุงูููุฒุงุช:
1. **ุนุฑุถ ุงูุฃุณุจุงุจ ูู 3 ุฃูุณุงู**:
   - ุฃุณุจุงุจ ุงูุดุฑุงุก (ุฃุฒุฑู)
   - ุฃุณุจุงุจ ุงูุตุฑู (ุฃุฎุถุฑ)
   - ุฃุณุจุงุจ ุงูุฅุชูุงู (ุฃุญูุฑ)

2. **ุฅุถุงูุฉ ุณุจุจ ุฌุฏูุฏ**:
   - ุฅุฏุฎุงู ูุต ุงูุณุจุจ
   - ุงุฎุชูุงุฑ ุงูููุน: ุดุฑุงุก ููุท / ุตุฑู ููุท / ุฅุชูุงู ููุท / ุดุฑุงุก ูุตุฑู

3. **ุชุนุฏูู ุณุจุจ ููุฌูุฏ**:
   - ุชุนุฏูู ุงููุต
   - ุชุบููุฑ ุงูููุน

4. **ุชูุนูู/ุชุนุทูู ุณุจุจ**:
   - ุฅุฎูุงุก ุงูุณุจุจ ูู ุงูููุงุฆู ุจุฏูู ุญุฐูู
   - ุงูุญูุงุธ ุนูู ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ

5. **ุญุฐู ุณุจุจ**:
   - ุญุฐู ููุงุฆู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - โ๏ธ ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ ุชุจูู ูุญููุธุฉ

---

## โ 5. useInventory Hook

### ุงูุฏูุงู ุงููุถุงูุฉ:

```typescript
// ุฌูุจ ุงูุฃุณุจุงุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
fetchReasons() // ูุชู ุงุณุชุฏุนุงุคูุง ุชููุงุฆููุง ุนูุฏ ุชุญููู ุงูุจุฑูุงูุฌ

// ุฅุถุงูุฉ ุณุจุจ ุฌุฏูุฏ
addReason(reasonText, reasonType)

// ุชุญุฏูุซ ุณุจุจ ููุฌูุฏ
updateReason(reason)

// ุญุฐู ุณุจุจ
deleteReason(id)

// ุงูุญุตูู ุนูู ุฃุณุจุงุจ ุงูุดุฑุงุก ุงููุดุทุฉ
getPurchaseReasons() // returns TransactionReason[]

// ุงูุญุตูู ุนูู ุฃุณุจุงุจ ุงูุตุฑู ุงููุดุทุฉ
getDispatchReasons() // returns TransactionReason[]

// ุงูุญุตูู ุนูู ุฃุณุจุงุจ ุงูุฅุชูุงู ุงููุดุทุฉ
getScrapReasons() // returns TransactionReason[]
```

---

## โ 6. ุงูุนูุงูุงุช ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `inventory_items`:
```
inventory_items
โโโ purchase_reason (text) - ูุญูุธ ูุต ุงูุณุจุจ
โโโ dispatch_reason (text) - ูุญูุธ ูุต ุงูุณุจุจ
โโโ scrap_reason (text) - ูุญูุธ ูุต ุงูุณุจุจ
```

### โ๏ธ ููุงุญุธุฉ ูููุฉ:
ุงูุฃุณุจุงุจ ุชูุญูุธ ูู **ูุต (text)** ูููุณ ูู **foreign key**ุ ูุฐูู ูู:
1. ุงูุญูุงุธ ุนูู ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ
2. ุนุฏู ููุฏุงู ุงููุนูููุงุช ุนูุฏ ุญุฐู ุณุจุจ
3. ุฅููุงููุฉ ุนุฑุถ ุงูุชูุงุฑูุฑ ุงูุชุงุฑูุฎูุฉ ุจุดูู ุตุญูุญ

---

## โ 7. ุงูุฃููููุงุช ุงููุถุงูุฉ

ุชู ุฅุถุงูุฉ ุงูุฃููููุงุช ุงูุชุงููุฉ ูู `icons.tsx`:
- โ `Eye` - ูุฅุธูุงุฑ ุงูุณุจุจ ุงููุดุท
- โ `EyeOff` - ูุฅุธูุงุฑ ุงูุณุจุจ ุงููุนุทู
- โ `Save` - ูุญูุธ ุงูุชุนุฏููุงุช

---

## โ 8. ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

### ุงูุณููุงุฑูู 1: ุฅุถุงูุฉ ุณุจุจ ุฌุฏูุฏ
1. ุงุฐูุจ ุฅูู ุงูุฅุนุฏุงุฏุงุช
2. ุงุถุบุท "ุฅุถุงูุฉ ุณุจุจ ุฌุฏูุฏ"
3. ุฃุฏุฎู ุงููุต ูุงุฎุชุฑ ุงูููุน
4. ุงุญูุธ
5. โ ูุธูุฑ ุงูุณุจุจ ููุฑูุง ูู ุงููุงุฆูุฉ ุงูููุงุณุจุฉ
6. โ ูุธูุฑ ุงูุณุจุจ ูู ุตูุญุฉ ุงูุงุณุชูุงู/ุงูุตุฑู/ุงูุฅุชูุงู ุญุณุจ ุงูููุน

### ุงูุณููุงุฑูู 2: ุชุนุฏูู ุณุจุจ ููุฌูุฏ
1. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุชุนุฏูู
2. ุบููุฑ ุงููุต ุฃู ุงูููุน
3. ุงุญูุธ
4. โ ูุชู ุชุญุฏูุซ ุงูุณุจุจ ููุฑูุง ูู ูู ุงูุตูุญุงุช

### ุงูุณููุงุฑูู 3: ุชุนุทูู ุณุจุจ
1. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุนูู
2. โ ูุฎุชูู ุงูุณุจุจ ูู ููุงุฆู ุงูุงุณุชูุงู/ุงูุตุฑู/ุงูุฅุชูุงู
3. โ ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ ุชุจูู ูุญููุธุฉ
4. โ ูููู ุฅุนุงุฏุฉ ุชูุนููู ูุงุญููุง

### ุงูุณููุงุฑูู 4: ุญุฐู ุณุจุจ
1. ุงุถุบุท ุนูู ุฃููููุฉ ุงูุญุฐู
2. ุฃูุฏ ุงูุญุฐู
3. โ ูุชู ุญุฐู ุงูุณุจุจ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. โ ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ ูู `inventory_items` ุชุจูู ูุญููุธุฉ

### ุงูุณููุงุฑูู 5: ุนุฑุถ ุงูุชูุงุฑูุฑ
1. ุงุฐูุจ ุฅูู ุงูุชูุงุฑูุฑ
2. โ ุชุธูุฑ ุงูุฃุณุจุงุจ ุงูุชุงุฑูุฎูุฉ ุงููุญููุธุฉ
3. โ ุญุชู ูู ุชู ุญุฐู ุงูุณุจุจ ูู ุงูุฅุนุฏุงุฏุงุช

---

## โ 9. ุงูุตูุญุงุช ุงูุชู ุชุนุฑุถ ุงูุฃุณุจุงุจ

| ุงูุตูุญุฉ | ุงูุญูู ุงููุนุฑูุถ | ููุน ุงูุณุจุจ | ููุงุญุธุงุช |
|--------|---------------|-----------|---------|
| Receiving.tsx | purchaseReason | purchase/both | ูุงุฆูุฉ ููุณุฏูุฉ |
| Dispatching.tsx | dispatchReason | dispatch/both | ูุงุฆูุฉ ููุณุฏูุฉ |
| Scrapping.tsx | scrapReason | scrap | ูุงุฆูุฉ ููุณุฏูุฉ |
| Reports.tsx | purchaseReason | - | ุนุฑุถ ููุท |
| PrintTemplates.tsx | purchaseReason | - | ุนุฑุถ ููุท |
| SupplierProfile.tsx | - | - | ูุง ูุนุฑุถ ุงูุฃุณุจุงุจ |
| Dashboard.tsx | - | - | ูุง ูุนุฑุถ ุงูุฃุณุจุงุจ |

---

## โ 10. ุฎุทูุงุช ุงูุชุดุบูู ุงูููุงุฆูุฉ

### ุงูุฎุทูุฉ 1: ุชุดุบูู SQL
```bash
# ุงูุชุญ Supabase SQL Editor
# ุงูุณุฎ ูุญุชูู supabase/add_reasons_table.sql
# ุดุบูู ุงูููุฏ
```

### ุงูุฎุทูุฉ 2: ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจุฑูุงูุฌ
```bash
npm run dev
```

### ุงูุฎุทูุฉ 3: ุงูุชุญูู
1. โ ุงุฐูุจ ุฅูู ุงูุฅุนุฏุงุฏุงุช
2. โ ุชุฃูุฏ ูู ุธููุฑ ูุณู "ุฅุฏุงุฑุฉ ุฃุณุจุงุจ ุงูุดุฑุงุก ูุงูุตุฑู"
3. โ ุชุฃูุฏ ูู ูุฌูุฏ 8 ุฃุณุจุงุจ ุงูุชุฑุงุถูุฉ
4. โ ุฌุฑุจ ุฅุถุงูุฉ ุณุจุจ ุฌุฏูุฏ
5. โ ุงุฐูุจ ุฅูู ุตูุญุฉ ุงูุงุณุชูุงู ูุชุฃูุฏ ูู ุธููุฑ ุงูุณุจุจ ุงูุฌุฏูุฏ

---

## โ 11. ุงููููุงุช ุงููุนุฏูุฉ

### ูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- โ `supabase/add_reasons_table.sql` (ุฌุฏูุฏ)

### ูููุงุช Types:
- โ `types.ts` (ูุญุฏุซ)

### ูููุงุช Hooks:
- โ `hooks/useInventory.ts` (ูุญุฏุซ)

### ูููุงุช Components:
- โ `components/ReasonsManager.tsx` (ุฌุฏูุฏ)
- โ `components/Settings.tsx` (ูุญุฏุซ)
- โ `components/Receiving.tsx` (ูุญุฏุซ)
- โ `components/Dispatching.tsx` (ูุญุฏุซ)
- โ `components/Scrapping.tsx` (ูุญุฏุซ)
- โ `components/icons.tsx` (ูุญุฏุซ)

### ูููุงุช ุงูุชูุซูู:
- โ `REASONS_SETUP_INSTRUCTIONS.md` (ุฌุฏูุฏ)
- โ `COMPLETE_REASONS_AUDIT.md` (ูุฐุง ุงูููู)

---

## โ 12. ุงูุฎูุงุตุฉ

### ูุง ุชู ุฅูุฌุงุฒู:
1. โ ูุธุงู ูุงูู ูุฅุฏุงุฑุฉ ุฃุณุจุงุจ ุงูุดุฑุงุก ูุงูุตุฑู ูุงูุฅุชูุงู
2. โ ูุงุนุฏุฉ ุจูุงูุงุช ูุชูุงููุฉ ูุน ููุงุฑุณ
3. โ ูุงุฌูุฉ ูุณุชุฎุฏู ุณููุฉ ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
4. โ ุชุญุฏูุซ ุฌููุน ุงูุตูุญุงุช ูุงุณุชุฎุฏุงู ุงูุฃุณุจุงุจ ุงูุฏููุงููููุฉ
5. โ ุงูุญูุงุธ ุนูู ุงูุจูุงูุงุช ุงูุชุงุฑูุฎูุฉ
6. โ ุงูุชุญุฏูุซ ุงูููุฑู ูู ูู ุงูุจุฑูุงูุฌ

### ุงูููุฒุงุช:
- โ ุฅุถุงูุฉ ุฃุณุจุงุจ ุฌุฏูุฏุฉ
- โ ุชุนุฏูู ุงูุฃุณุจุงุจ ุงูููุฌูุฏุฉ
- โ ุชูุนูู/ุชุนุทูู ุงูุฃุณุจุงุจ
- โ ุญุฐู ุงูุฃุณุจุงุจ
- โ ุชุญุฏูุฏ ููุน ุงูุณุจุจ (ุดุฑุงุก/ุตุฑู/ุฅุชูุงู/ููุงููุง)
- โ ุชุฑุชูุจ ุชููุงุฆู ููุฃุณุจุงุจ
- โ ุนุฑุถ ุงูุฃุณุจุงุจ ูู ุงูุชูุงุฑูุฑ ูุงูุทุจุงุนุฉ

### ุงููุชูุฌุฉ:
๐ **ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุจุดูู ูุงูู!**

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:
1. ุชุญูู ูู Console ูู ุงููุชุตูุญ (F12)
2. ุชุฃูุฏ ูู ุชุดุบูู SQL ูู Supabase
3. ุชุฃูุฏ ูู ุงุชุตุงู Supabase
4. ุฑุงุฌุน ููู `REASONS_SETUP_INSTRUCTIONS.md`
